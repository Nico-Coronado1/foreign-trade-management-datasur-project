{"ast":null,"code":"var _jsxFileName = \"/home/nicolas/Desktop/foreign-trade-management/frontend/src/context/AppContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useReducer } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AppReducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_PRODUCT_SUCCESS':\n      return {\n        ...state,\n        products: action.payload\n      };\n    case 'FETCH_TYPES_SUCCESS':\n      return {\n        ...state,\n        types: action.payload\n      };\n    case 'FETCH_FAILURE':\n      return {\n        ...state,\n        error: action.payload\n      };\n    case 'CREATE_PRODUCT':\n      return {\n        ...state\n      };\n    case \"CHANGE_TO_EXPORT_LIST_BY_TYPE\":\n      if (!action.payload) {\n        return state;\n      }\n      // solo cambiar a los productos que no tengan valor en el campo exportedQuantity.\n      // let updateToExportListByType = state.products.filter((product) =>)\n      return {\n        ...state\n      };\n    case \"CHANGE_EXPORTED_LIST_BY_TYPE\":\n      if (!action.payload) {\n        return state;\n      }\n      // solo cambiar sacar los que tiene numero en el campo exportedQuantity\n      let updatedExportedListByType = state.products.filter(product => product.type === action.payload);\n      return {\n        ...state,\n        products: updatedExportedListByType\n      };\n    case \"EXPORT_PRODUCT\":\n      let newTotal = state.total;\n      let newTotalProducts = state.totalProducts;\n      let newProductsBought = state.productsBought;\n      const updatedProducts = state.products.map(product => {\n        if (product.name === action.payload) {\n          newTotalProducts--;\n          newProductsBought++;\n          newTotal += product.price;\n          return {\n            ...product,\n            quantity: product.quantity - 1\n          };\n        }\n        return product;\n      });\n      return {\n        ...state,\n        total: newTotal,\n        totalProducts: newTotalProducts,\n        productsBought: newProductsBought,\n        products: updatedProducts\n      };\n    default:\n      return state;\n  }\n};\n_c = AppReducer;\nconst initialState = {\n  error: null,\n  types: [],\n  ExportedProducts: 0,\n  products: []\n};\nexport const AppContext = /*#__PURE__*/createContext();\nexport const AppProvider = props => {\n  _s();\n  const [state, dispatch] = useReducer(AppReducer, initialState);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('products/api/products');\n        const data = await response.json();\n        dispatch({\n          type: 'FETCH_PRODUCT_SUCCESS',\n          payload: data.products\n        });\n      } catch (error) {\n        dispatch({\n          type: 'FETCH_FAILURE',\n          payload: error.message\n        });\n      }\n    };\n    fetchData();\n  }, []);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('types/api/types');\n        const data = await response.json();\n        dispatch({\n          type: 'FETCH_TYPES_SUCCESS',\n          payload: data.types\n        });\n      } catch (error) {\n        dispatch({\n          type: 'FETCH_FAILURE',\n          payload: error.message\n        });\n      }\n    };\n    fetchData();\n  }, []);\n  let exportedProducts = state.products.reduce((total, product) => total + product.exported_quantity, 0);\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      products: state.products,\n      dispatch,\n      exportedProducts: exportedProducts,\n      countries: state.countries,\n      types: state.types\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n};\n_s(AppProvider, \"GUSXxL/WUElrtHc/X73NyHNRMdw=\");\n_c2 = AppProvider;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppReducer\");\n$RefreshReg$(_c2, \"AppProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useReducer","jsxDEV","_jsxDEV","AppReducer","state","action","type","products","payload","types","error","updatedExportedListByType","filter","product","newTotal","total","newTotalProducts","totalProducts","newProductsBought","productsBought","updatedProducts","map","name","price","quantity","_c","initialState","ExportedProducts","AppContext","AppProvider","props","_s","dispatch","fetchData","response","fetch","data","json","message","exportedProducts","reduce","exported_quantity","Provider","value","countries","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["/home/nicolas/Desktop/foreign-trade-management/frontend/src/context/AppContext.js"],"sourcesContent":["import React, {createContext, useEffect, useReducer} from 'react';\n\nexport const AppReducer = (state, action) => {\n    switch (action.type){\n        case 'FETCH_PRODUCT_SUCCESS':\n            return {...state, products: action.payload}\n        case 'FETCH_TYPES_SUCCESS':\n            return {...state, types: action.payload}\n        case 'FETCH_FAILURE':\n            return {...state, error: action.payload}\n        case 'CREATE_PRODUCT':\n            return {...state}\n        case \"CHANGE_TO_EXPORT_LIST_BY_TYPE\":\n            if (!action.payload){\n                return state\n            }\n            // solo cambiar a los productos que no tengan valor en el campo exportedQuantity.\n            // let updateToExportListByType = state.products.filter((product) =>)\n            return {...state}\n        case \"CHANGE_EXPORTED_LIST_BY_TYPE\":\n            if (!action.payload){\n                return state\n            }\n            // solo cambiar sacar los que tiene numero en el campo exportedQuantity\n            let updatedExportedListByType = state.products.filter((product) => product.type === action.payload)\n            return{\n                ...state,\n                products: updatedExportedListByType\n            };\n        case \"EXPORT_PRODUCT\":\n            let newTotal = state.total\n            let newTotalProducts = state.totalProducts\n            let newProductsBought = state.productsBought\n            const updatedProducts = state.products.map((product) =>{\n                if(product.name === action.payload){\n                    newTotalProducts--\n                    newProductsBought++\n                    newTotal += product.price\n                    return {\n                        ...product,\n                        quantity: product.quantity - 1\n                    }\n                }\n                return product\n            })\n            return {\n                ...state,\n                total: newTotal,\n                totalProducts: newTotalProducts,\n                productsBought: newProductsBought,\n                products: updatedProducts,\n                    }\n        default:\n            return state\n    }\n}\n\nconst initialState = {\n    error: null,\n    types:[],\n    ExportedProducts: 0,\n    products: [],\n};\n\nexport const AppContext = createContext();\nexport const AppProvider = (props) => {\n    const [state, dispatch] = useReducer(AppReducer, initialState);\n    useEffect(() => {\n        const fetchData = async () => {\n        try {\n            const response = await fetch('products/api/products');\n            const data = await response.json();\n            dispatch({ type: 'FETCH_PRODUCT_SUCCESS', payload: data.products });\n        } catch (error) {\n            dispatch({ type: 'FETCH_FAILURE', payload: error.message });\n            }\n        };\n        fetchData();\n    }, []);\n   useEffect(() => {\n        const fetchData = async () => {\n        try {\n            const response = await fetch('types/api/types');\n            const data = await response.json();\n            dispatch({ type: 'FETCH_TYPES_SUCCESS', payload: data.types });\n        } catch (error) {\n            dispatch({ type: 'FETCH_FAILURE', payload: error.message });\n            }\n        };\n        fetchData();\n    }, []);\n\n    let exportedProducts = state.products.reduce((total, product) => total + product.exported_quantity, 0);\n    return (\n        <AppContext.Provider\n            value={{\n                products: state.products,\n                dispatch,\n                exportedProducts: exportedProducts,\n                countries: state.countries,\n                types: state.types\n            }}\n        >\n            {props.children}\n        </AppContext.Provider>\n    );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}